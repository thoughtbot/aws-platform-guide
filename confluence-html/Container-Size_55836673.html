<!DOCTYPE html>
<html>
    <head>
        <title>AWS Platform Guide : Container Size</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">AWS Platform Guide</a></span>
                            </li>
                                                    <li>
                                <span><a href="AWS-Platform-Guide-Home_13697366.html">AWS Platform Guide Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Scaling-and-Capacity_54657026.html">Scaling and Capacity</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            AWS Platform Guide : Container Size
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Joe Ferris</span> on Oct 26, 2022
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>Unlike some other platforms, containers are not constrained to a predetermined size. When you deploy your application, you decide how much RAM and CPU to allocate to each container. This is done using <a class="external-link" href="https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/" rel="nofollow">resource requests</a> in your pod manifests. Here is an example container which requests 512MiB of RAM and expects to use half a CPU core:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">spec:
  containers:
  - name: main
    image: example:latest
    resources:
      requests:
        memory: 512Mi
        cpu: &quot;500m&quot;</pre>
</div></div><p>We strongly recommend adding resource requests to all your containers. This will tell the cluster how much space it should expect to allocate to run your container.</p><h2 id="ContainerSize-VerticalAutoscaling">Vertical Autoscaling</h2><p>Many applications experience fluctuation in memory or CPU requirements as the application scales. Rather than manually tracking the resources your containers require and updating your resource requests as the application grows, you can tell the cluster to automatically adjust the requirements using the vertical pod autoscaler, which is deployed as part of the Flightdeck platform. Here is an example which will automatically adjust the size of the pods for a deployment, but will never scale it beyond 2 CPU cores or 4GiB of memory:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: java; gutter: false; theme: Confluence" data-theme="Confluence">apiVersion: autoscaling.k8s.io/v1
kind: VerticalPodAutoscaler
metadata:
  name: example
spec:
  targetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: example
  updatePolicy:
    updateMode: Auto
  resourcePolicy:
    containerPolicies:
    - containerName: &quot;main&quot;
      maxAllowed:
        cpu: 2000m
        memory: 4Gi</pre>
</div></div><p />
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Mar 18, 2024 10:54</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
